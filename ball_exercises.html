<!DOCTYPE html>
<html>
<head>
  <!-- tells the browser to use the utf-8 character encoding -->
  <meta charset="utf-8" />

  <title>
    Add New Balls
  </title>

  <style>
  * {
    padding: 0;
    margin: 0;
   }
   canvas {
     background: #eee;
     display: block;
     margin: 0 auto;
   }

   .button {
    width: 100px;
    height: 100px;
    text-align: center;
   	border-radius: 100px;
   	border: 2px solid #000000;
   	display: block;
   	font-size: 50px;
    margin: 0 auto;
    transition-duration: .5s;
   }

   .button:hover {
     background-color: black;
     transition-duration: .5s;
   }
  </style>

</head>

<body>

  <!-- setting up the canvas, describing its size -->
  <canvas id="myCanvas" width="480" height="320">
  </canvas>
  <button class="button" onclick="addBall()">ü§πüèæ‚Äç</button>

  <script>
    // storing a reference to the canvas element under the name "canvas"
    var canvas = document.getElementById("myCanvas");

    // creating the ctx variable to store the 2d rendering context.
    // this is what will actually "paint" on the "canvas"
    var ctx = canvas.getContext("2d");

    var balls = [];

    // defining the balls' radius
    var ballRadius = 10;

    // initial ball count
    var ballCount = 0;

    function addBall() {
      ballCount += 1;
      var ball = {
        color: '#'+Math.floor(Math.random()*16777215).toString(16),
        dyBall: -5,
        dxBall: 5,
        ballX: Math.floor(Math.random() * 10) * Math.floor(Math.random() * 10) + 10,
        ballY: Math.floor(Math.random() * 10) * Math.floor(Math.random() * 10) + 10,
      };
      balls.push(ball);
    }

    // define the function that will draw the ball initially:
    function drawBall(ballColor, ballX, ballY) {
      // begin the instructions for drawing the ball
      ctx.beginPath();
      // (x, y) coordinates for the circle's center,
      // arc radius, start and end angle (in radians),
      // direction to draw the circle in ("false" indicates clockwise)
      ctx.arc(ballX,ballY,ballRadius,0,Math.PI*2,false);
      // define the ball's color
      ctx.fillStyle = ballColor;
      // define the circle's fill pattern
      ctx.fill();
      // end of instructions for drawing the circle
      ctx.closePath();
    }

    // define the function that will update the canvas:
    function draw() {
      // clear the canvas before redrawing
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      // draw the balls

      for (var index in balls) {

        var ball = balls[index];

        drawBall(ball.color, ball.ballX, ball.ballY);

        ball.ballX += ball.dxBall;
        ball.ballY += ball.dyBall;

        if (ball.ballY + ball.dyBall < ballRadius || ball.ballY + ball.dyBall > (canvas.height - ballRadius)) {
          ball.dyBall = -ball.dyBall;
        }
        if (ball.ballX + ball.dxBall < ballRadius || ball.ballX + ball.dxBall > (canvas.width - ballRadius))  {
          ball.dxBall = -ball.dxBall;
        }
      }

      // smooth ball moving animation
      requestAnimationFrame(draw);
    }

    draw();

  </script>

</body>

</html>
